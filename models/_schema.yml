version: 2

models:
  - name: stg_austin_weather
    description: This model processes and standardizes raw weather data for Austin, providing key metrics such as temperature, precipitation, and wind conditions for analysis.
    columns:
      - name: weather_pk
        description: A unique identifier for each weather record, generated by hashing the weather date.
        tests:
          - not_null
          - unique
      - name: weather_date
        description: The date of the weather observation.
      - name: weather_code
        description: A code representing specific weather conditions.
      - name: avg_temp
        description: The average temperature recorded on the weather date.
      - name: max_temp
        description: The maximum temperature recorded on the weather date.
      - name: min_temp
        description: The minimum temperature recorded on the weather date.
      - name: total_precipitation
        description: The total amount of precipitation recorded on the weather date.
      - name: sunshine_hours
        description: The total hours of sunshine recorded on the weather date.
      - name: daylight_hours
        description: The total hours of daylight recorded on the weather date.
      - name: wind_gusts
        description: The maximum wind gusts recorded on the weather date.
      - name: wind_speed
        description: The maximum wind speed recorded on the weather date.

  - name: stg_weather_codes
    description: This model standardizes and prepares weather code data for further analysis. It extracts weather codes and their descriptions from the raw weather codes source, ensuring data consistency and readiness for downstream processes.
    columns:
      - name: weather_code
        description: A unique identifier representing a specific weather condition.
        tests:
          - not_null
          - unique
      - name: description
        description: A textual explanation of the weather condition associated with the weather code.

  - name: int_weather_with_description
    description: This model integrates Austin weather data with descriptive weather codes, providing a comprehensive view of weather conditions. It combines detailed weather metrics with human-readable descriptions to facilitate analysis and reporting.
    columns:
      - name: weather_pk
        description: Primary key for the weather record.
      - name: weather_date
        description: The date of the weather observation.
      - name: weather_code
        description: Code representing specific weather conditions.
      - name: avg_temp
        description: Average temperature recorded on the weather date.
      - name: max_temp
        description: Maximum temperature recorded on the weather date.
      - name: min_temp
        description: Minimum temperature recorded on the weather date.
      - name: total_precipitation
        description: Total precipitation recorded on the weather date.
      - name: sunshine_hours
        description: Total hours of sunshine recorded on the weather date.
      - name: daylight_hours
        description: Total hours of daylight recorded on the weather date.
      - name: wind_gusts
        description: Maximum wind gusts recorded on the weather date.
      - name: wind_speed
        description: Average wind speed recorded on the weather date.
      - name: weather_description
        description: Human-readable description of the weather conditions.

  - name: mart_austin_weather
    description: This model provides a comprehensive summary of weather data for Austin, including temperature, precipitation, sunshine, and wind metrics. It calculates derived metrics such as temperature difference, gust difference, cloud hours, and sunshine percentage to offer insights into daily weather variations.
    columns:
      - name: weather_pk
        description: Primary key for the weather record.
      - name: weather_date
        description: The date of the weather record.
      - name: weather_code
        description: Code representing the weather condition.
      - name: weather_description
        description: Description of the weather condition.
      - name: avg_temp
        description: Average temperature for the day.
      - name: max_temp
        description: Maximum temperature recorded for the day.
      - name: min_temp
        description: Minimum temperature recorded for the day.
      - name: total_precipitation
        description: Total precipitation recorded for the day.
      - name: sunshine_hours
        description: Total hours of sunshine recorded for the day.
      - name: daylight_hours
        description: Total hours of daylight recorded for the day.
      - name: wind_gusts
        description: Maximum wind gusts recorded for the day.
      - name: wind_speed
        description: Average wind speed recorded for the day.
      - name: temp_dif
        description: Difference between maximum and minimum temperature for the day.
      - name: gust_dif
        description: Difference between wind gusts and average wind speed for the day.
      - name: cloud_hours
        description: Estimated hours of cloud cover, calculated as the difference between daylight and sunshine hours.
      - name: sunshine_pct
        description: Percentage of daylight hours that were sunny.
